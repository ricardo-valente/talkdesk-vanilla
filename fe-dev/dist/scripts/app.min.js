/**
 * talkdesk-challenge
 * @Web 
 * @Author  - 
 * Updated on: 20190913-114209
 */
let app={debug:!0,debugLocalIps:["localhost","192.168.6.141"],mobileWidth:"768",loadedFonts:0,loadedImages:0,lang:document.querySelector("body").getAttribute("[data-lang]"),host:window.location.hostname,browser:!1,navigator:"",SIZE:{wW:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,wH:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},DATA:{},COOKIES_NAMES:{ACCEPT:"acceptCookie"},exists:e=>$(e).length>0,isMobile:()=>app.SIZE.wW<=app.mobileWidth,debugEnvir:()=>app.debug&&void 0!==app.host&&app.debugLocalIps.length>0&&app.debugLocalIps.indexOf(app.host)>-1,init:()=>{$doc=document.documentElement,$body=$doc.querySelector("body");window.onresize=()=>{app.SIZE.wW=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,app.SIZE.wH=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,console.log("app window.onresize")},$doc.querySelector("#search__form")&&app.search.init()}};(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{console.warn("ATENÇÃO: Debug está ligado!"),console.log("-- DOCUMENT IS READY - GO GO --"),app.init()})})(),app.helpers={TIMERS:"",DATA:"",AJAX:"",init:()=>{let e=app.helpers;e.setupEvents(),e.setupLayout()},setupEvents:()=>{},setupLayout:()=>{},browserDetect:()=>{let e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){let t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}let a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)},osDetect:()=>{let e=!1;return-1!==navigator.appVersion.indexOf("Win")?e="Windows":-1!==navigator.appVersion.indexOf("Mac")?e="MacOS":-1!==navigator.appVersion.indexOf("X11")?e="UNIX":-1!==navigator.appVersion.indexOf("Linux")&&(e="Linux"),e},getUrlParam:(e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");let a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},getRandom:(e,t,a)=>"int"===a?(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e):Math.random()*(t-e)+e,getClosest:(e,t)=>{for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),a=t.length;--a>=0&&t.item(a)!==this;);return a>-1});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},serializeArray:e=>{for(var t=[],a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.name&&!n.disabled&&"file"!==n.type&&"reset"!==n.type&&"submit"!==n.type&&"button"!==n.type)if("select-multiple"===n.type)for(var i=0;i<n.options.length;i++)n.options[i].selected&&t.push({name:n.name,value:n.options[i].value});else("checkbox"!==n.type&&"radio"!==n.type||n.checked)&&t.push({name:n.name,value:n.value})}return t}},app.search={TIMERS:"",DATA:"",API_SEARCH:"https://talkdesk-com.meza.talkdeskqa.com/wp-json/external/globalsearch/",PAGE_SIZE:10,PAGES_TO_SKIPE:0,TOTAL_PAGES:0,TOTAL_ITEMS:0,CURRENT_PAGE:1,CURRENT_DATA:"",KEYWORD:"",init:()=>{console.log("=====\napp Search Init\n");let e=app.search;e.getSearch(t=>{e.setupEvents(),e.setupLayout()})},setupEvents:()=>{console.log("=====\napp Search === Events\n");let e=app.helpers,t=app.search;t.filtersHandler(),t.paginationHandler(),document.querySelector("form").addEventListener("change",a=>{let n=a.currentTarget,i=e.serializeArray(n);t.KEYWORD=i[0].value})},setupLayout:()=>{console.log("=====\napp Search === layout\n");let e=app.search;if(e.DATA&&e.DATA.posts.length&&(e.CURRENT_DATA=e.DATA.posts,e.CURRENT_DATA.sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(e.PAGES_TO_SKIPE,-(e.CURRENT_DATA.length-e.PAGE_SIZE-e.PAGES_TO_SKIPE)).map((e,t)=>{let a=((e,t)=>{let a=e.title?e.title:"";return`\n        <a href="${e.url?e.url:"#"}" class="" target="_self" title="${a}">\n          <span class="card__label text-orange">${e.category?e.category:""}</span>\n          <span class="card__label text-capitalize">${e.date&&null!==e.date?e.date:""}</span>\n          <h4 class="card__title">${a}</h4>\n          <p class="card__url">${e.url?e.url.replace(/^.*:\/\//i,""):""}</p>\n        </a>`})(e),n=document.createElement("div");n.className="col-12 card",n.innerHTML=a,document.getElementById("search-results--cards").append(n)})),e.DATA&&e.CURRENT_DATA){e.TOTAL_PAGES=(e.CURRENT_DATA.length/e.PAGE_SIZE).toFixed();let t,a="";e.TOTAL_PAGES>1&&(e.CURRENT_PAGE-2>0&&(a=`${e.CURRENT_PAGE-2}`,(t=document.createElement("li")).className="pagination__item",t.setAttribute("data-page",e.CURRENT_PAGE-2),t.innerHTML=a,document.getElementById("pagination").appendChild(t)),e.CURRENT_PAGE-1>0&&(a=`${e.CURRENT_PAGE-1}`,(t=document.createElement("li")).className="pagination__item",t.setAttribute("data-page",e.CURRENT_PAGE-1),t.innerHTML=a,document.getElementById("pagination").appendChild(t)),a=`${e.CURRENT_PAGE}`,(t=document.createElement("li")).className="pagination__item pagination__item--active",t.setAttribute("data-page",e.CURRENT_PAGE),t.innerHTML=a,document.getElementById("pagination").appendChild(t),e.CURRENT_PAGE+1<=e.TOTAL_PAGES&&(a=`${e.CURRENT_PAGE+1}`,(t=document.createElement("li")).className="pagination__item",t.setAttribute("data-page",e.CURRENT_PAGE+1),t.innerHTML=a,document.getElementById("pagination").appendChild(t)),e.CURRENT_PAGE+2<e.TOTAL_PAGES&&(a=`${e.CURRENT_PAGE+2}`,(t=document.createElement("li")).className="pagination__item",t.setAttribute("data-page",e.CURRENT_PAGE+2),t.innerHTML=a,document.getElementById("pagination").appendChild(t)))}document.getElementById("total-results").textContent=e.CURRENT_DATA.length},getSearch:e=>{console.log("=====\napp Search === first paint\n");let t=app.search,a=e;fetch(t.API_SEARCH).then(e=>{if(e.ok)return e.json();throw new Error("Something went wrong")}).then(e=>{t.DATA=e,"function"==typeof a&&a()}).catch(e=>{console.log(e),t.DATA=data})},filtersHandler:()=>{document.addEventListener("click",e=>{let t=e.target,a=t.parentNode,n=app.search;if(t.hasAttribute("data-filter")&&(e.preventDefault(),a.matches(".search__item")&&!a.matches(".search__item--active"))){console.log("=====\nFilter Handler"),console.log('active filter = "',t.getAttribute("data-filter"),'"'),document.getElementById("search-results--cards").innerHTML="",document.getElementById("pagination").innerHTML="";const e=document.querySelector(".search__item--active");if(e&&e.classList.remove("search__item--active"),a.className="search__item search__item--active",n.DATA&&n.DATA.posts.length){const e=(e,t)=>{let a=e.title?e.title:"";return`\n                <a href="${e.url?e.url:"#"}" class="" target="_self" title="${a}">\n                  <span class="card__label text-orange">${e.category?e.category:""}</span>\n                  <span class="card__label text-capitalize">${e.date&&null!==e.date?e.date:""}</span>\n                  <h4 class="card__title">${a}</h4>\n                  <p class="card__url">${e.url?e.url.replace(/^.*:\/\//i,""):""}</p>\n                </a>`};let a="*"!==t.getAttribute("data-filter")&&t.getAttribute("data-filter");n.CURRENT_PAGE=1,n.TOTAL_PAGES=0,n.TOTAL_ITEMS=0,n.PAGES_TO_SKIPE=0,n.CURRENT_DATA=n.DATA.posts.filter(e=>{if(a){if(n.KEYWORD){if(e.category===a&&-1!=e.title.toLowerCase().indexOf(n.KEYWORD.toLowerCase()))return n.TOTAL_ITEMS++,n.TOTAL_PAGES=n.TOTAL_ITEMS-n.PAGE_SIZE>0?((n.TOTAL_ITEMS-n.PAGE_SIZE)/n.PAGE_SIZE).toFixed():0,e}else if(e.category===a)return n.TOTAL_ITEMS++,n.TOTAL_PAGES=n.TOTAL_ITEMS-n.PAGE_SIZE>0?((n.TOTAL_ITEMS-n.PAGE_SIZE)/n.PAGE_SIZE).toFixed():0,e}else{if(!n.KEYWORD)return n.TOTAL_ITEMS++,n.TOTAL_PAGES=n.TOTAL_ITEMS-n.PAGE_SIZE>0?((n.TOTAL_ITEMS-n.PAGE_SIZE)/n.PAGE_SIZE).toFixed():0,e;if(-1!=e.title.toLowerCase().indexOf(n.KEYWORD.toLowerCase()))return n.TOTAL_ITEMS++,n.TOTAL_PAGES=n.TOTAL_ITEMS-n.PAGE_SIZE>0?((n.TOTAL_ITEMS-n.PAGE_SIZE)/n.PAGE_SIZE).toFixed():0,e}}),n.CURRENT_DATA.slice(n.PAGES_TO_SKIPE,-(n.TOTAL_ITEMS-n.PAGE_SIZE-n.PAGES_TO_SKIPE)).map((t,a)=>{let n=e(t,a),i=document.createElement("div");i.className="col-12 card",i.innerHTML=n,document.getElementById("search-results--cards").append(i)}),console.log("current data = ",n.CURRENT_DATA)}if(n.TOTAL_ITEMS){let e,t=parseInt(n.CURRENT_PAGE),a=n.PAGE_SIZE,i=n.TOTAL_PAGES=((n.TOTAL_ITEMS-a)/a).toFixed(),l="";i>0&&(t-2>0&&(l=`${t-2}`,(e=document.createElement("li")).className="pagination__item",e.setAttribute("data-page",t-2),e.innerHTML=l,document.getElementById("pagination").appendChild(e)),t-1>0&&(l=`${t-1}`,(e=document.createElement("li")).className="pagination__item",e.setAttribute("data-page",t-1),e.innerHTML=l,document.getElementById("pagination").appendChild(e)),l=`${t}`,(e=document.createElement("li")).className="pagination__item pagination__item--active",e.setAttribute("data-page",t),e.innerHTML=l,document.getElementById("pagination").appendChild(e),t+1<=i&&(l=`${t+1}`,(e=document.createElement("li")).className="pagination__item",e.setAttribute("data-page",t+1),e.innerHTML=l,document.getElementById("pagination").appendChild(e)),t+2<i&&(l=`${t+2}`,(e=document.createElement("li")).className="pagination__item",e.setAttribute("data-page",t+2),e.innerHTML=l,document.getElementById("pagination").appendChild(e)))}document.getElementById("total-results").textContent=n.TOTAL_ITEMS||n.CURRENT_DATA.length,console.log('total pages = "',n.TOTAL_PAGES,'"'),console.log('total items = "',n.TOTAL_ITEMS||n.CURRENT_DATA.length,'"\n======')}},!1)},paginationHandler:()=>{document.addEventListener("click",e=>{let t=app.search,a=e.target;if(a.hasAttribute("data-page")){e.preventDefault();let n=document.querySelector(".search__item--active").children[0].getAttribute("data-filter");if(a.matches(".pagination__item")&&!a.matches(".pagination__item--active")){if(e.preventDefault(),t.DATA&&t.DATA.posts||t.CURRENT_DATA){t.CURRENT_PAGE=a.getAttribute("data-page"),document.getElementById("search-results--cards").innerHTML="",document.getElementById("pagination").innerHTML="",t.PAGES_TO_SKIPE=t.PAGE_SIZE*t.CURRENT_PAGE;const e=(e,t)=>{let a=e.title?e.title:"";return`\n                <a href="${e.url?e.url:"#"}" class="" target="_self" title="${a}">\n                  <span class="card__label text-orange">${e.category?e.category:""}</span>\n                  <span class="card__label text-capitalize">${e.date&&null!==e.date?e.date:""}</span>\n                  <h4 class="card__title">${a}</h4>\n                  <p class="card__url">${e.url?e.url.replace(/^.*:\/\//i,""):""}</p>\n                </a>`};let i=t.CURRENT_DATA;"*"===n?(t.TOTAL_PAGES=((t.DATA.posts.length-t.PAGE_SIZE)/t.PAGE_SIZE).toFixed(),t.TOTAL_ITEMS=t.DATA.posts.length,i.slice(t.PAGES_TO_SKIPE,-(t.DATA.posts.length-t.PAGE_SIZE-t.PAGES_TO_SKIPE)).map((t,a)=>{let n=e(t,a),i=document.createElement("div");i.className="col-12 card",i.innerHTML=n,document.getElementById("search-results--cards").append(i)})):(t.TOTAL_PAGES=0,t.TOTAL_ITEMS=0,i.filter(e=>(e.category===n&&(t.TOTAL_ITEMS++,t.TOTAL_PAGES=t.TOTAL_ITEMS-t.PAGE_SIZE>0?((t.TOTAL_ITEMS-t.PAGE_SIZE)/t.PAGE_SIZE).toFixed():0),e.category===n)).slice(t.PAGES_TO_SKIPE,-(t.TOTAL_ITEMS-t.PAGE_SIZE-t.PAGES_TO_SKIPE)).map((t,a)=>{let n=e(t,a),i=document.createElement("div");i.className="col-12 card",i.innerHTML=n,document.getElementById("search-results--cards").append(i)})),t.CURRENT_PAGE=parseInt(a.getAttribute("data-page"));let l,o=t.TOTAL_PAGES,r="";t.TOTAL_PAGES>0&&(t.CURRENT_PAGE-2>0&&(r=`${t.CURRENT_PAGE-2}`,(l=document.createElement("li")).className="pagination__item",l.setAttribute("data-page",t.CURRENT_PAGE-2),l.innerHTML=r,document.getElementById("pagination").appendChild(l)),t.CURRENT_PAGE-1>0&&(r=`${t.CURRENT_PAGE-1}`,(l=document.createElement("li")).className="pagination__item",l.setAttribute("data-page",t.CURRENT_PAGE-1),l.innerHTML=r,document.getElementById("pagination").appendChild(l)),r=`${t.CURRENT_PAGE}`,(l=document.createElement("li")).className="pagination__item pagination__item--active",l.setAttribute("data-page",t.CURRENT_PAGE),l.innerHTML=r,document.getElementById("pagination").appendChild(l),t.CURRENT_PAGE+1<=o&&(r=`${t.CURRENT_PAGE+1}`,(l=document.createElement("li")).className="pagination__item",l.setAttribute("data-page",t.CURRENT_PAGE+1),l.innerHTML=r,document.getElementById("pagination").appendChild(l)),t.CURRENT_PAGE+2<=o&&(r=`${t.CURRENT_PAGE+2}`,(l=document.createElement("li")).className="pagination__item",l.setAttribute("data-page",t.CURRENT_PAGE+2),l.innerHTML=r,document.getElementById("pagination").appendChild(l)))}document.getElementById("total-results").textContent=t.TOTAL_ITEMS,console.log("=====\nPagination Handler"),console.log('active page = "',a.getAttribute("data-page"),'"'),console.log('filter used = "',n,'"'),console.log('total pages = "',t.TOTAL_PAGES,'"'),console.log('total items = "',t.TOTAL_ITEMS,'"\n======')}}},!1)},searchHandler:e=>{console.log("=====\nSearch Keyword"),e.preventDefault();let t=app.helpers,a=app.search,n=document.getElementById("search__form"),i=t.serializeArray(n);if(a.KEYWORD=i[0].value,document.getElementById("search-results--cards").innerHTML="",document.getElementById("pagination").innerHTML="",a.DATA&&a.DATA.posts.length){const e=(e,t)=>{let a=e.title?e.title:"";return`\n          <a href="${e.url?e.url:"#"}" class="" target="_self" title="${a}">\n            <span class="card__label text-orange">${e.category?e.category:""}</span>\n            <span class="card__label text-capitalize">${e.date&&null!==e.date?e.date:""}</span>\n            <h4 class="card__title">${a}</h4>\n            <p class="card__url">${e.url?e.url.replace(/^.*:\/\//i,""):""}</p>\n          </a>`};let t="*"!==document.querySelector(".search__item--active").children[0].getAttribute("data-filter")&&document.querySelector(".search__item--active").children[0].getAttribute("data-filter");console.log("category = ",t),a.CURRENT_PAGE=1,a.TOTAL_PAGES=0,a.TOTAL_ITEMS=0,a.PAGES_TO_SKIPE=0,a.CURRENT_DATA=a.DATA.posts.filter(e=>{if(t){if(a.KEYWORD){if(e.category===t&&-1!=e.title.toLowerCase().indexOf(a.KEYWORD.toLowerCase()))return a.TOTAL_ITEMS++,a.TOTAL_PAGES=a.TOTAL_ITEMS-a.PAGE_SIZE>0?((a.TOTAL_ITEMS-a.PAGE_SIZE)/a.PAGE_SIZE).toFixed():0,e}else if(e.category===t)return a.TOTAL_ITEMS++,a.TOTAL_PAGES=a.TOTAL_ITEMS-a.PAGE_SIZE>0?((a.TOTAL_ITEMS-a.PAGE_SIZE)/a.PAGE_SIZE).toFixed():0,e}else{if(!a.KEYWORD)return a.TOTAL_ITEMS++,a.TOTAL_PAGES=a.TOTAL_ITEMS-a.PAGE_SIZE>0?((a.TOTAL_ITEMS-a.PAGE_SIZE)/a.PAGE_SIZE).toFixed():0,e;if(-1!=e.title.toLowerCase().indexOf(a.KEYWORD.toLowerCase()))return a.TOTAL_ITEMS++,a.TOTAL_PAGES=a.TOTAL_ITEMS-a.PAGE_SIZE>0?((a.TOTAL_ITEMS-a.PAGE_SIZE)/a.PAGE_SIZE).toFixed():0,e}}),a.CURRENT_DATA.slice(a.PAGES_TO_SKIPE,-(a.TOTAL_ITEMS-a.PAGE_SIZE-a.PAGES_TO_SKIPE)).map((t,a)=>{let n=e(t,a),i=document.createElement("div");i.className="col-12 card",i.innerHTML=n,document.getElementById("search-results--cards").append(i)}),console.log("current data = ",a.CURRENT_DATA)}a.TOTAL_PAGES>1&&(a.CURRENT_PAGE-2>0&&(markup=`${a.CURRENT_PAGE-2}`,container=document.createElement("li"),container.className="pagination__item",container.setAttribute("data-page",a.CURRENT_PAGE-2),container.innerHTML=markup,document.getElementById("pagination").appendChild(container)),a.CURRENT_PAGE-1>0&&(markup=`${a.CURRENT_PAGE-1}`,container=document.createElement("li"),container.className="pagination__item",container.setAttribute("data-page",a.CURRENT_PAGE-1),container.innerHTML=markup,document.getElementById("pagination").appendChild(container)),markup=`${a.CURRENT_PAGE}`,container=document.createElement("li"),container.className="pagination__item pagination__item--active",container.setAttribute("data-page",a.CURRENT_PAGE),container.innerHTML=markup,document.getElementById("pagination").appendChild(container),a.CURRENT_PAGE+1<=a.TOTAL_PAGES&&(markup=`${a.CURRENT_PAGE+1}`,container=document.createElement("li"),container.className="pagination__item",container.setAttribute("data-page",a.CURRENT_PAGE+1),container.innerHTML=markup,document.getElementById("pagination").appendChild(container)),a.CURRENT_PAGE+2<a.TOTAL_PAGES&&(markup=`${a.CURRENT_PAGE+2}`,container=document.createElement("li"),container.className="pagination__item",container.setAttribute("data-page",a.CURRENT_PAGE+2),container.innerHTML=markup,document.getElementById("pagination").appendChild(container))),console.log('pages to skipe = "',a.PAGES_TO_SKIPE,'"'),console.log('total pages = "',a.TOTAL_PAGES,'"'),console.log('total items = "',a.TOTAL_ITEMS,'"'),console.log('active page = "',document.querySelector(".pagination__item--active")?document.querySelector(".pagination__item--active").getAttribute("data-page"):"N/A",'"\n======'),document.getElementById("keyword").textContent=a.KEYWORD,document.getElementById("total-results").textContent=a.TOTAL_ITEMS}};
//# sourceMappingURL=maps/app.min.js.map
