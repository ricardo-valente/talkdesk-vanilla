{"version":3,"sources":["app.js","helpers.js","components/search.js"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.min.js","sourcesContent":["/*\n * INFO:\n * \t> Main script initializer\n * \t> Change the var \"app\" to something related to the project\n * \t> Search for usage\n */\n\nlet app = {\n  //Configs + Constants\n\n  //removeIf(production)\n  debug: true,\n  debugLocalIps: ['localhost', '192.168.6.141'],\n  //endRemoveIf(production)\n\n  mobileWidth: '768',\n  loadedFonts: 0,\n  loadedImages: 0,\n  lang: document.querySelector('body').getAttribute('[data-lang]'),\n  host: window.location.hostname,\n  browser: false,\n  navigator: '',\n\n  SIZE: {\n    wW: window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n    wH: window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n  },\n\n  DATA: {},\n\n  COOKIES_NAMES: {\n    ACCEPT: 'acceptCookie'\n  },\n\n  exists: (el) => {\n    return ($(el).length > 0);\n  },\n\n  isMobile: () => {\n    return (app.SIZE.wW <= app.mobileWidth);\n  },\n\n  //removeIf(production)\n  debugEnvir: () => {\n    return (app.debug && app.host !== undefined && app.debugLocalIps.length > 0 && app.debugLocalIps.indexOf(app.host) > -1);\n  },\n  //endRemoveIf(production)\n\n  init: () => {\n    // GLOBAL VARS ---------------------------------------\n    $doc = document.documentElement;\n    $body = $doc.querySelector('body');\n\n    //ON RESIZE\n    let reportWindowSize = () => {\n      app.SIZE.wW = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n      app.SIZE.wH = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n      console.log('app window.onresize');\n    };\n    window.onresize = reportWindowSize;\n\n\n    // COMMON --------------------------------------------\n\n\n    // COMPONENTS ----------------------------------------\n    if ($doc.querySelector('#search__form')) {\n      app.search.init();\n    }\n\n\n        // PAGES ---------------------------------------------\n\n    }\n};\n\n(() => {\n  'use strict';\n  document.addEventListener('DOMContentLoaded', () => {\n    //removeIf(production)\n    console.warn('ATENÇÃO: Debug está ligado!');\n    console.log('-- DOCUMENT IS READY - GO GO --');\n    //endRemoveIf(production)\n\n    app.init();\n\n  });\n})();\n","app.helpers = {\n  // COMMON --------------------------------------------\n  // Configs + Constants\n  TIMERS: '',\n  DATA: '',\n  AJAX: '',\n\n\n  // MAIN FUNCTIONS ------------------------------------\n  init: () => {\n    let _this = app.helpers;\n\n    _this.setupEvents();\n    _this.setupLayout();\n  },\n\n  setupEvents: () => { },\n  setupLayout: () => { },\n\n  // OTHER FUNCTIONS -----------------------------------\n  browserDetect: () => {\n    let ua = window.navigator.userAgent;\n\n    let msie = ua.indexOf('MSIE ');\n    if (msie > 0) {\n      // IE 10 or older => return version number\n      return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n    }\n\n    let trident = ua.indexOf('Trident/');\n    if (trident > 0) {\n      // IE 11 => return version number\n      let rv = ua.indexOf('rv:');\n      return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n    }\n\n    let edge = ua.indexOf('Edge/');\n    if (edge > 0) {\n      // Edge (IE 12+) => return version number\n      return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n    }\n\n    // other browser\n    return false;\n  },\n\n  osDetect: () => {\n    let res = false;\n    if (navigator.appVersion.indexOf(\"Win\") !== -1) { res = \"Windows\"; }\n    else if (navigator.appVersion.indexOf(\"Mac\") !== -1) { res = \"MacOS\"; }\n    else if (navigator.appVersion.indexOf(\"X11\") !== -1) { res = \"UNIX\"; }\n    else if (navigator.appVersion.indexOf(\"Linux\") !== -1) { res = \"Linux\"; }\n\n    return res;\n  },\n\n  getUrlParam: (name, url) => {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    let regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n      results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  },\n\n  getRandom: (min, max, type) => {\n    if (type === 'int') {\n      min = Math.ceil(min);\n      max = Math.floor(max);\n\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n    else {\n      return Math.random() * (max - min) + min;\n    }\n  },\n\n  /**\n   * Get the closest matching element up the DOM tree.\n   * @private\n   * @param  {Element} elem     Starting element\n   * @param  {String}  selector Selector to match against\n   * @return {Boolean|Element}  Returns null if not match found\n   */\n  getClosest: (elem, selector) => {\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n      Element.prototype.matches =\n        Element.prototype.matchesSelector ||\n        Element.prototype.mozMatchesSelector ||\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.oMatchesSelector ||\n        Element.prototype.webkitMatchesSelector ||\n        function (s) {\n          var matches = (this.document || this.ownerDocument).querySelectorAll(s),\n            i = matches.length;\n          while (--i >= 0 && matches.item(i) !== this) { }\n          return i > -1;\n        };\n    }\n\n    // Get closest match\n    for (; elem && elem !== document; elem = elem.parentNode) {\n      if (elem.matches(selector)) return elem;\n    }\n\n    return null;\n  },\n\n  paginate: (totalItems, currentPage = 1, pageSize = 10, maxPages = 10) => {\n    // calculate total pages\n    let totalPages = Math.ceil(totalItems / pageSize);\n\n    // ensure current page isn't out of range\n    if (currentPage < 1) {\n      currentPage = 1;\n    } else if (currentPage > totalPages) {\n      currentPage = totalPages;\n    }\n\n    let startPage, endPage;\n    if (totalPages <= maxPages) {\n      // total pages less than max so show all pages\n      startPage = 1;\n      endPage = totalPages;\n    } else {\n      // total pages more than max so calculate start and end pages\n      let maxPagesBeforeCurrentPage = Math.floor(maxPages / 2);\n      let maxPagesAfterCurrentPage = Math.ceil(maxPages / 2) - 1;\n      if (currentPage <= maxPagesBeforeCurrentPage) {\n        // current page near the start\n        startPage = 1;\n        endPage = maxPages;\n      } else if (currentPage + maxPagesAfterCurrentPage >= totalPages) {\n        // current page near the end\n        startPage = totalPages - maxPages + 1;\n        endPage = totalPages;\n      } else {\n        // current page somewhere in the middle\n        startPage = currentPage - maxPagesBeforeCurrentPage;\n        endPage = currentPage + maxPagesAfterCurrentPage;\n      }\n    }\n\n    // calculate start and end item indexes\n    let startIndex = (currentPage - 1) * pageSize;\n    let endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n\n    // create an array of pages to ng-repeat in the pager control\n    let pages = Array.from(Array((endPage + 1) - startPage).keys()).map(i => startPage + i);\n\n    // return object with all pager properties required by the view\n    return {\n      totalItems: totalItems,\n      currentPage: currentPage,\n      pageSize: pageSize,\n      totalPages: totalPages,\n      startPage: startPage,\n      endPage: endPage,\n      startIndex: startIndex,\n      endIndex: endIndex,\n      pages: pages\n    };\n  }\n};\n","app.search = {\n  // COMMON --------------------------------------------\n  // Configs + Constants\n  TIMERS: '',\n  DATA: '',\n  API_SEARCH: 'https://talkdesk-com.meza.talkdeskqa.com/wp-json/external/globalsearch',\n  // Pagination\n  PAGE_SIZE: 10,\n  TOTAL_PAGES: 0,\n  CURRENTE_PAGE: 1,\n  // END Pagination\n\n  // MAIN FUNCTIONS ------------------------------------\n  init: () => {\n    console.log('=====\\napp Search Init\\n');\n    let _this = app.search;\n\n    _this.firstPaint((callback) => {\n      _this.setupEvents();\n      _this.setupLayout();\n    });\n\n  },\n\n  setupEvents: () => {\n    console.log('=====\\napp Search === Events\\n');\n    let _this = app.search;\n\n    _this.filtersHandler();\n    _this.paginationHandler();\n  },\n\n  setupLayout: () => {\n    console.log('=====\\napp Search === layout\\n');\n    let _this = app.search;\n\n    // Setup cards\n    const cardsTemplate = (content, idx) => {\n      return `\n        <a href=\"${content.url}\" class=\"\" target=\"_self\" title=\"${content.title}\">\n          <span class=\"card__label text-orange\">${content.category}</span>\n          <span class=\"card__label text-capitalize\">${content.date}</span>\n          <h4 class=\"card__title\">${content.title}</h4>\n          <p class=\"card__url\">${content.url.replace(/^.*:\\/\\//i, '')}</p>\n        </a>`\n    };\n\n    // Setup cards\n    if (!!_this.DATA && _this.DATA.posts.length) {\n      _this.DATA.posts.slice(_this.PAGE_SKIP, _this.PAGE_SIZE).map((content, idx) => {\n        let markupHtml = cardsTemplate(content, idx);\n        let container = document.createElement('div');\n\n        container.className = 'col-12 card';\n        container.innerHTML = markupHtml;\n\n        document.getElementById('search-results--cards').append(container);\n      });\n    };\n\n    // Setup filters\n    const filtersTemplate = (content, idx) => {\n      return `<a href=\"#\" data-filter=\"${content.slug}\">${content.label}</a>`;\n    };\n\n    if (!!_this.DATA && _this.DATA.posts.length) {\n      _this.DATA.menu.map((content, idx) => {\n        let markupHtml = filtersTemplate(content, idx);\n        let container = document.createElement('li');\n\n        container.className = 'search__item';\n        container.innerHTML = markupHtml;\n\n        document.getElementById('search-filters').append(container);\n      });\n    };\n\n    // Setup Pagination\n    if (!!_this.DATA && !!_this.DATA.posts.length) {\n      let page = _this.CURRENTE_PAGE;\n      let pageSize = _this.PAGE_SIZE;\n      let total = _this.TOTAL_PAGES = Math.ceil((_this.DATA.posts.length - pageSize) / pageSize);\n\n      console.log(total);\n\n      let markupHtml = '';\n      let container = document.createElement('li');\n      container.className = 'pagination__item';\n\n      if (total > 0) {\n        // Previous Pages\n        if (page - 2 >= 0) {\n          markupHtml = `<span>${page - 1}</span>`;\n          container.setAttribute('data-page', page - 2);\n          document.getElementById('pagination').append(container);\n        }\n\n        if (page - 1 >= 0) {\n          markupHtml = `<span>${page}</span>`;\n          container.setAttribute('data-page', page - 1);\n          document.getElementById('pagination').append(container);\n        }\n\n        // Current Page\n        markupHtml = `<span>${page}</span>`;\n        container.setAttribute('data-page', page + 1);\n        document.getElementById('pagination').append(container);\n\n        // Next Pages\n        if (page + 1 <= totalPages) {\n          markupHtml = `<span>${page + 2}</span>`;\n          container.setAttribute('data-page', page + 1);\n          document.getElementById('pagination').append(container);\n        }\n        if (page + 2 < totalPages) {\n          markupHtml = `<span>${page + 3}</span>`;\n          container.setAttribute('data-page', page + 2);\n          document.getElementById('pagination').append(container);\n        }\n      }\n\n    };\n  },\n\n\n  // OTHER FUNCTIONS -----------------------------------\n  firstPaint: (_callback) => {\n    console.log('=====\\napp Search === first paint\\n');\n    let _this = app.search;\n\n    let callback = _callback;\n    fetch(_this.API_SEARCH)\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        }\n        throw new Error('Something went wrong');\n      })\n      .then((data) => {\n        _this.DATA = data;\n\n        if (typeof callback === 'function') {\n          callback();\n        }\n        console.log(_this.DATA);\n      })\n      .catch((error) => {\n        console.log(error)\n        _this.DATA = data;\n      });\n  },\n\n  searchHandler: () => {\n    let form = document.getElementById('search__form');\n    form.addEventListener('submit', (event) => {\n      event.preventDefault();\n\n      console.log('submit search');\n      var formData = serialize(form);\n\n      console.log('form data', formData);\n    });\n  },\n\n  filtersHandler: () => {\n    document.addEventListener('click', (event) => {\n      var _this = event.target;\n      var _parent = _this.parentNode;\n\n      if (_this.matches('.search__item')) {\n        event.preventDefault();\n        if (_this.querySelector('a').hasAttribute('data-filter'))\n          console.log(_this.querySelector('a').getAttribute('data-filter'));\n      } else if (_this.hasAttribute('data-filter')) {\n        event.preventDefault();\n        if (_parent.matches('.search__item'))\n          console.log(_this.getAttribute('data-filter'));\n      }\n\n    }, false);\n  },\n\n  paginationHandler: () => {\n    document.addEventListener('click', (event) => {\n      event.preventDefault();\n      var _this = app.search;\n\n      if (!!_this.DATA && !!_this.DATA.posts.length) {\n        let totalPosts = _this.DATA.posts.length;\n        let totalPages = (totalPosts - _this.PAGE_SIZE) <= 0 ? 0 : ((totalPosts - _this.PAGE_SIZE) / _this.PAGE_SIZE).toFixed();\n        console.log('total pages', totalPages);\n      }\n\n      _this = event.target;\n      var _parent = _this.parentNode;\n      // If the clicked element doesn't have the right selector, bail\n      if (_this.matches('.pagination--item')) {\n        // Don't follow the link\n        event.preventDefault();\n        // Log the clicked element in the console\n        console.log(event.target.getAttribute('data-page'));\n\n\n\n      }\n    }, false);\n  }\n};\n"]}